<div class="array-container" *ngIf="arrayControl.controls.length > 0" 
    cdkDropList
    [cdkDropListDisabled]="false"
    [cdkDropListData]="arrayControl.controls"
    (cdkDropListDropped)="sort($event)">
    <div *ngFor="let itemForm of arrayControl.controls; let i = index"
        class="table-drag item"
        cdkDrag
        cdkDragLockAxis="y">
        <sqx-array-item
            [form]="form"
            [formContext]="formContext"
            [field]="field"
            [isHidden]="snapshot.isHidden"
            [isDisabled]="arrayControl.disabled"
            [isFirst]="i === 0"
            [isLast]="i === arrayControl.controls.length - 1"
            [index]="i"
            [itemForm]="itemForm"
            [language]="language"
            [languages]="languages"
            (clone)="itemAdd(itemForm)"
            (move)="move(itemForm, $event)"
            (remove)="itemRemove(i)"
            (toggle)="hide($event)">
            <i cdkDragHandle class="icon-drag2"></i>
        </sqx-array-item>
    </div>
</div>

<button type="button" class="btn btn-success" [disabled]="field.nested.length === 0 || arrayControl.disabled" (click)="itemAdd(undefined)">
    Add Item
</button>

<small class="text-muted ml-2" *ngIf="field.nested.length === 0">
    Add a nested field first to add items.
</small>